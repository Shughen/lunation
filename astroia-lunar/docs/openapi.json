{"openapi":"3.1.0","info":{"title":"Astroia Lunar API","description":"API pour calculs de révolutions lunaires et thèmes natals","version":"1.0.0"},"paths":{"/api/auth/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"Inscription d'un nouvel utilisateur","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegister"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"Connexion","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Me","description":"Récupère le profil de l'utilisateur connecté","operationId":"get_me_api_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/natal-chart":{"get":{"tags":["Natal Chart"],"summary":"Get Natal Chart","description":"Récupère le thème natal de l'utilisateur","operationId":"get_natal_chart_api_natal_chart_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatalChartResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Natal Chart"],"summary":"Calculate Natal Chart","description":"Calcule le thème natal et le sauvegarde\nSi un thème existe déjà, il sera écrasé","operationId":"calculate_natal_chart_api_natal_chart_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatalChartRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatalChartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/natal-chart/external":{"post":{"tags":["Natal Chart"],"summary":"Calculate Natal Chart External","description":"Endpoint pass-through vers RapidAPI pour calculer un thème natal.\nAccepte n'importe quel payload JSON et le transmet directement à RapidAPI.\n\nExemple de payload:\n{\n    \"name\": \"John Doe\",\n    \"date\": \"1990-05-15\",\n    \"time\": \"14:30\",\n    \"latitude\": 48.8566,\n    \"longitude\": 2.3522,\n    \"timezone\": \"Europe/Paris\"\n}","operationId":"calculate_natal_chart_external_api_natal_chart_external_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lunar-returns/generate":{"post":{"tags":["Lunar Returns"],"summary":"Generate Lunar Returns","description":"Génère les 12 révolutions lunaires de l'année en cours\nNécessite un thème natal calculé au préalable","operationId":"generate_lunar_returns_api_lunar_returns_generate_post","responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/lunar-returns/":{"get":{"tags":["Lunar Returns"],"summary":"Get All Lunar Returns","description":"Récupère toutes les révolutions lunaires de l'utilisateur","operationId":"get_all_lunar_returns_api_lunar_returns__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/LunarReturnResponse"},"type":"array","title":"Response Get All Lunar Returns Api Lunar Returns  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/lunar-returns/{month}":{"get":{"tags":["Lunar Returns"],"summary":"Get Lunar Return By Month","description":"Récupère une révolution lunaire spécifique par mois","operationId":"get_lunar_return_by_month_api_lunar_returns__month__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"month","in":"path","required":true,"schema":{"type":"string","title":"Month"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarReturnResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lunar/return/report":{"post":{"tags":["Luna Pack","Luna Pack"],"summary":"Lunar Return Report","description":"Génère un rapport mensuel de révolution lunaire.\n\nLe rapport contient l'analyse complète de la position de retour de la Lune\net ses implications pour le mois à venir.\n\n- **user_id**: (Optionnel) ID utilisateur pour sauvegarder en base\n- **month**: (Optionnel) Format YYYY-MM pour indexation\n- **payload**: Données requises par RapidAPI (date, coords, etc.)","operationId":"lunar_return_report_api_lunar_return_report_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarReturnReportRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lunar/voc":{"post":{"tags":["Luna Pack","Luna Pack"],"summary":"Void Of Course","description":"Obtient les informations Void of Course (VoC) de la Lune.\n\nLe VoC représente la période où la Lune ne fait plus d'aspects majeurs\navant de changer de signe - considérée comme peu propice aux initiatives.\n\n- **date**: Date à vérifier (YYYY-MM-DD)\n- **time**: Heure (HH:MM)\n- **coords**: Latitude/longitude pour calcul précis","operationId":"void_of_course_api_lunar_voc_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoidOfCourseRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lunar/mansion":{"post":{"tags":["Luna Pack","Luna Pack"],"summary":"Lunar Mansion","description":"Obtient les informations sur la mansion lunaire du jour.\n\nLes 28 mansions lunaires sont un système ancien divisant l'orbite lunaire\nen 28 segments, chacun ayant sa propre signification et influence.\n\n- **date**: Date à vérifier (YYYY-MM-DD)\n- **coords**: Latitude/longitude pour calcul précis","operationId":"lunar_mansion_api_lunar_mansion_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarMansionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lunar/return/report/history/{user_id}":{"get":{"tags":["Luna Pack","Luna Pack"],"summary":"Get User Lunar Reports","description":"Récupère l'historique des rapports lunaires d'un utilisateur.","operationId":"get_user_lunar_reports_api_lunar_return_report_history__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response Get User Lunar Reports Api Lunar Return Report History  User Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lunar/voc/current":{"get":{"tags":["Luna Pack","Luna Pack"],"summary":"Get Current Voc Status","description":"Vérifie s'il y a une fenêtre VoC active actuellement.","operationId":"get_current_voc_status_api_lunar_voc_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Current Voc Status Api Lunar Voc Current Get"}}}}}}},"/api/lunar/mansion/today":{"get":{"tags":["Luna Pack","Luna Pack"],"summary":"Get Today Mansion","description":"Récupère la mansion lunaire du jour depuis le cache.","operationId":"get_today_mansion_api_lunar_mansion_today_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Today Mansion Api Lunar Mansion Today Get"}}}}}}},"/api/lunar/voc/next_window":{"get":{"tags":["Luna Pack","Luna Pack"],"summary":"Get Next Voc Window","description":"Récupère la prochaine fenêtre Void of Course depuis la DB.\n\nUtile pour planifier des notifications et alertes.","operationId":"get_next_voc_window_api_lunar_voc_next_window_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Next Voc Window Api Lunar Voc Next Window Get"}}}}}}},"/api/transits/natal":{"post":{"tags":["Transits","Transits"],"summary":"Natal Transits","description":"Calcule les transits planétaires actuels croisés avec le thème natal.\n\nAnalyse les aspects formés par les planètes en transit avec les positions natales,\npermettant de comprendre les influences astrologiques du moment.\n\n- **user_id**: (Optionnel) ID utilisateur pour sauvegarde en DB\n- **birth_date**: Date de naissance\n- **transit_date**: Date du transit à calculer","operationId":"natal_transits_api_transits_natal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NatalTransitsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/transits/lunar_return":{"post":{"tags":["Transits","Transits"],"summary":"Lunar Return Transits","description":"Calcule les transits planétaires sur une révolution lunaire.\n\nAnalyse comment les planètes en transit interagissent avec la carte\nde révolution lunaire du mois, pour affiner les prévisions mensuelles.\n\n- **user_id**: (Optionnel) ID utilisateur pour sauvegarde en DB\n- **month**: (Optionnel) Mois au format YYYY-MM pour indexation\n- **lunar_return_date**: Date de la révolution lunaire\n- **transit_date**: Date actuelle","operationId":"lunar_return_transits_api_transits_lunar_return_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarReturnTransitsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/transits/overview/{user_id}/{month}":{"get":{"tags":["Transits","Transits"],"summary":"Get Transits Overview","description":"Récupère la vue d'ensemble des transits pour un utilisateur et un mois donnés.\n\nRetourne les données en cache incluant les transits natals et LR du mois.\n\n- **user_id**: ID de l'utilisateur\n- **month**: Mois au format YYYY-MM","operationId":"get_transits_overview_api_transits_overview__user_id___month__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"month","in":"path","required":true,"schema":{"type":"string","title":"Month"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitsOverviewDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/transits/overview/{user_id}":{"get":{"tags":["Transits","Transits"],"summary":"Get User Transits History","description":"Récupère l'historique des transits overview pour un utilisateur.\n\n- **user_id**: ID de l'utilisateur","operationId":"get_user_transits_history_api_transits_overview__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransitsOverviewDB"},"title":"Response Get User Transits History Api Transits Overview  User Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/calendar/phases":{"post":{"tags":["Calendar","Calendar"],"summary":"Lunar Phases","description":"Obtient les phases lunaires précises pour une période donnée.\n\nRetourne les dates et heures exactes des nouvelles lunes, pleines lunes,\npremiers quartiers et derniers quartiers.\n\n- **start_date**: Date de début (YYYY-MM-DD)\n- **end_date**: Date de fin (YYYY-MM-DD)","operationId":"lunar_phases_api_calendar_phases_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarPhasesRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/calendar/events":{"post":{"tags":["Calendar","Calendar"],"summary":"Lunar Events","description":"Obtient les événements lunaires spéciaux (éclipses, superlunes, etc.).\n\n- **start_date**: Date de début\n- **end_date**: Date de fin\n- **event_types**: (Optionnel) Filtrer par types d'événements","operationId":"lunar_events_api_calendar_events_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarEventsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/calendar/year":{"post":{"tags":["Calendar","Calendar"],"summary":"Lunar Calendar Year","description":"Obtient le calendrier lunaire complet pour une année.\n\nRetourne toutes les nouvelles/pleines lunes, éclipses et événements majeurs\npour l'année entière.\n\n- **year**: Année (ex: 2025)","operationId":"lunar_calendar_year_api_calendar_year_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LunarCalendarYearRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/calendar/month":{"get":{"tags":["Calendar","Calendar"],"summary":"Monthly Calendar","description":"Génère un calendrier mensuel combiné avec phases, mansions et événements.\n\nCroise les données de plusieurs sources pour créer une vue calendrier unifiée.\n\n- **year**: Année (ex: 2025)\n- **month**: Mois (1-12)\n- **latitude/longitude**: Coordonnées (Paris par défaut)","operationId":"monthly_calendar_api_calendar_month_get","parameters":[{"name":"year","in":"query","required":true,"schema":{"type":"integer","title":"Year"}},{"name":"month","in":"query","required":true,"schema":{"type":"integer","title":"Month"}},{"name":"latitude","in":"query","required":false,"schema":{"type":"number","default":48.8566,"title":"Latitude"}},{"name":"longitude","in":"query","required":false,"schema":{"type":"number","default":2.3522,"title":"Longitude"}},{"name":"timezone","in":"query","required":false,"schema":{"type":"string","default":"Europe/Paris","title":"Timezone"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonthlyCalendarResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reports/lunar/{user_id}/{month}":{"post":{"tags":["Reports","Reports"],"summary":"Generate Lunar Monthly Report","description":"Génère un rapport mensuel complet combinant:\n- Rapport de révolution lunaire\n- Transits du mois\n- Événements lunaires\n\nRetourne le HTML du rapport (et optionnellement l'URL du PDF).\n\n- **user_id**: ID de l'utilisateur\n- **month**: Mois au format YYYY-MM","operationId":"generate_lunar_monthly_report_api_reports_lunar__user_id___month__post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"month","in":"path","required":true,"schema":{"type":"string","title":"Month"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reports/lunar/{user_id}/{month}/html":{"get":{"tags":["Reports","Reports"],"summary":"Get Lunar Monthly Report Html","description":"Retourne le rapport mensuel en HTML pur (pour affichage direct dans un navigateur).","operationId":"get_lunar_monthly_report_html_api_reports_lunar__user_id___month__html_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"month","in":"path","required":true,"schema":{"type":"string","title":"Month"}}],"responses":{"200":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Health check","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check détaillé avec vérifications database et RapidAPI.\nRetourne l'état de santé des dépendances critiques.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AspectInfo":{"properties":{"transit_planet":{"type":"string","title":"Transit Planet"},"natal_planet":{"type":"string","title":"Natal Planet"},"aspect":{"type":"string","title":"Aspect"},"orb":{"type":"number","title":"Orb"},"interpretation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Interpretation"}},"type":"object","required":["transit_planet","natal_planet","aspect","orb"],"title":"AspectInfo","description":"Information sur un aspect de transit"},"Body_login_api_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_api_auth_login_post"},"CalendarDayInfo":{"properties":{"date":{"type":"string","title":"Date"},"day_of_week":{"type":"string","title":"Day Of Week"},"phases":{"items":{"type":"string"},"type":"array","title":"Phases"},"mansion":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Mansion"},"events":{"items":{"type":"string"},"type":"array","title":"Events"},"lunar_day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lunar Day"}},"type":"object","required":["date","day_of_week"],"title":"CalendarDayInfo","description":"Information pour un jour du calendrier"},"CalendarResponse":{"properties":{"provider":{"type":"string","title":"Provider","default":"rapidapi"},"kind":{"type":"string","title":"Kind","description":"Type: lunar_phases, lunar_events, lunar_calendar_year"},"data":{"type":"object","title":"Data"},"cached":{"type":"boolean","title":"Cached","default":false}},"type":"object","required":["kind","data"],"title":"CalendarResponse","description":"Réponse standardisée pour les endpoints calendrier"},"DateTimeLocation":{"properties":{"year":{"type":"integer","title":"Year"},"month":{"type":"integer","title":"Month"},"day":{"type":"integer","title":"Day"},"hour":{"type":"integer","title":"Hour"},"minute":{"type":"integer","title":"Minute"},"second":{"type":"integer","title":"Second","default":0},"city":{"type":"string","title":"City","default":"Paris"},"country_code":{"type":"string","title":"Country Code","default":"FR"}},"type":"object","required":["year","month","day","hour","minute"],"title":"DateTimeLocation","description":"Objet datetime_location pour RapidAPI"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LunarCalendarYearRequest":{"properties":{"year":{"type":"integer","title":"Year","description":"Année (ex: 2025)"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude","description":"Latitude"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude","description":"Longitude"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone","description":"Timezone","default":"Europe/Paris"}},"additionalProperties":true,"type":"object","required":["year"],"title":"LunarCalendarYearRequest","description":"Requête pour obtenir le calendrier lunaire annuel"},"LunarEventsRequest":{"properties":{"start_date":{"type":"string","title":"Start Date","description":"Date de début (YYYY-MM-DD)"},"end_date":{"type":"string","title":"End Date","description":"Date de fin (YYYY-MM-DD)"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude","description":"Latitude"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude","description":"Longitude"},"event_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Event Types","description":"Types d'événements à filtrer"}},"additionalProperties":true,"type":"object","required":["start_date","end_date"],"title":"LunarEventsRequest","description":"Requête pour obtenir les événements lunaires spéciaux"},"LunarMansionRequest":{"properties":{"datetime_location":{"$ref":"#/components/schemas/DateTimeLocation"},"system":{"type":"string","title":"System","description":"Système de mansions (arabian_tropical, vedic, etc.)","default":"arabian_tropical"},"days_ahead":{"type":"integer","title":"Days Ahead","description":"Nombre de jours à calculer","default":28}},"type":"object","required":["datetime_location"],"title":"LunarMansionRequest","description":"Requête spécifique pour Lunar Mansions - Format RapidAPI"},"LunarPhasesRequest":{"properties":{"start_date":{"type":"string","title":"Start Date","description":"Date de début (YYYY-MM-DD)"},"end_date":{"type":"string","title":"End Date","description":"Date de fin (YYYY-MM-DD)"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude","description":"Latitude (pour heure locale)"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude","description":"Longitude"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone","description":"Timezone","default":"Europe/Paris"}},"additionalProperties":true,"type":"object","required":["start_date","end_date"],"title":"LunarPhasesRequest","description":"Requête pour obtenir les phases lunaires"},"LunarResponse":{"properties":{"provider":{"type":"string","title":"Provider","description":"Source des données","default":"rapidapi"},"kind":{"type":"string","title":"Kind","description":"Type de données: lunar_return_report, void_of_course, lunar_mansion"},"data":{"type":"object","title":"Data","description":"Données brutes du provider"},"cached":{"type":"boolean","title":"Cached","description":"Données provenant du cache DB","default":false}},"type":"object","required":["kind","data"],"title":"LunarResponse","description":"Réponse standardisée pour tous les endpoints lunaires.\nEncapsule la réponse du provider avec métadonnées.","example":{"cached":false,"data":{"interpretation":"Mois favorable aux finances...","moon":{"house":2,"sign":"Taurus"}},"kind":"lunar_return_report","provider":"rapidapi"}},"LunarReturnReportRequest":{"properties":{"date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date","description":"Date au format YYYY-MM-DD"},"time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Time","description":"Heure au format HH:MM"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude","description":"Latitude du lieu"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude","description":"Longitude du lieu"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone","description":"Fuseau horaire (ex: Europe/Paris)"},"birth_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Date"},"birth_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Time"},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id","description":"ID utilisateur pour sauvegarde en DB"},"month":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Month","description":"Mois au format YYYY-MM pour indexation"}},"additionalProperties":true,"type":"object","title":"LunarReturnReportRequest","description":"Requête spécifique pour le Lunar Return Report"},"LunarReturnResponse":{"properties":{"id":{"type":"integer","title":"Id"},"month":{"type":"string","title":"Month"},"return_date":{"type":"string","title":"Return Date"},"lunar_ascendant":{"type":"string","title":"Lunar Ascendant"},"moon_house":{"type":"integer","title":"Moon House"},"moon_sign":{"type":"string","title":"Moon Sign"},"aspects":{"items":{},"type":"array","title":"Aspects"},"interpretation":{"type":"string","title":"Interpretation"}},"type":"object","required":["id","month","return_date","lunar_ascendant","moon_house","moon_sign","aspects","interpretation"],"title":"LunarReturnResponse"},"LunarReturnTransitsRequest":{"properties":{"birth_date":{"type":"string","title":"Birth Date","description":"Date de naissance (YYYY-MM-DD)"},"birth_time":{"type":"string","title":"Birth Time","description":"Heure de naissance (HH:MM)"},"birth_latitude":{"type":"number","title":"Birth Latitude","description":"Latitude du lieu de naissance"},"birth_longitude":{"type":"number","title":"Birth Longitude","description":"Longitude du lieu de naissance"},"birth_timezone":{"type":"string","title":"Birth Timezone","description":"Timezone de naissance","default":"Europe/Paris"},"lunar_return_date":{"type":"string","title":"Lunar Return Date","description":"Date de la révolution lunaire (YYYY-MM-DD)"},"transit_date":{"type":"string","title":"Transit Date","description":"Date du transit actuel (YYYY-MM-DD)"},"orb":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Orb","description":"Orbe des aspects en degrés","default":5.0},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id","description":"ID utilisateur pour sauvegarde en DB"},"month":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Month","description":"Mois au format YYYY-MM"}},"additionalProperties":true,"type":"object","required":["birth_date","birth_time","birth_latitude","birth_longitude","lunar_return_date","transit_date"],"title":"LunarReturnTransitsRequest","description":"Requête pour calculer les transits sur une révolution lunaire"},"MonthlyCalendarResponse":{"properties":{"year":{"type":"integer","title":"Year"},"month":{"type":"integer","title":"Month"},"days":{"items":{"$ref":"#/components/schemas/CalendarDayInfo"},"type":"array","title":"Days"},"summary":{"additionalProperties":{"type":"integer"},"type":"object","title":"Summary"}},"type":"object","required":["year","month","days","summary"],"title":"MonthlyCalendarResponse","description":"Réponse du calendrier mensuel combiné","example":{"days":[{"date":"2025-01-15","day_of_week":"Wednesday","events":["supermoon"],"lunar_day":1,"mansion":{"id":7,"name":"Al-Dhira"},"phases":["new_moon"]}],"month":1,"summary":{"eclipses":0,"full_moons":1,"new_moons":1,"special_events":2},"year":2025}},"NatalChartRequest":{"properties":{"date":{"type":"string","title":"Date"},"time":{"type":"string","title":"Time"},"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"place_name":{"type":"string","title":"Place Name"},"timezone":{"type":"string","title":"Timezone","default":"Europe/Paris"}},"type":"object","required":["date","time","latitude","longitude","place_name"],"title":"NatalChartRequest"},"NatalChartResponse":{"properties":{"id":{"type":"integer","title":"Id"},"sun_sign":{"type":"string","title":"Sun Sign"},"moon_sign":{"type":"string","title":"Moon Sign"},"ascendant":{"type":"string","title":"Ascendant"},"planets":{"type":"object","title":"Planets"},"houses":{"type":"object","title":"Houses"},"aspects":{"items":{},"type":"array","title":"Aspects"}},"type":"object","required":["id","sun_sign","moon_sign","ascendant","planets","houses","aspects"],"title":"NatalChartResponse"},"NatalTransitsRequest":{"properties":{"birth_date":{"type":"string","title":"Birth Date","description":"Date de naissance (YYYY-MM-DD)"},"birth_time":{"type":"string","title":"Birth Time","description":"Heure de naissance (HH:MM)"},"birth_latitude":{"type":"number","title":"Birth Latitude","description":"Latitude du lieu de naissance"},"birth_longitude":{"type":"number","title":"Birth Longitude","description":"Longitude du lieu de naissance"},"birth_timezone":{"type":"string","title":"Birth Timezone","description":"Timezone de naissance","default":"Europe/Paris"},"transit_date":{"type":"string","title":"Transit Date","description":"Date du transit (YYYY-MM-DD)"},"transit_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transit Time","description":"Heure du transit (HH:MM)"},"orb":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Orb","description":"Orbe des aspects en degrés","default":5.0},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id","description":"ID utilisateur pour sauvegarde en DB"}},"additionalProperties":true,"type":"object","required":["birth_date","birth_time","birth_latitude","birth_longitude","transit_date"],"title":"NatalTransitsRequest","description":"Requête pour calculer les transits sur le thème natal"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"TransitsInsights":{"properties":{"insights":{"items":{"type":"string"},"type":"array","title":"Insights","description":"3-5 bullet points clés"},"major_aspects":{"items":{"$ref":"#/components/schemas/AspectInfo"},"type":"array","title":"Major Aspects","description":"Aspects majeurs"},"energy_level":{"type":"string","title":"Energy Level","description":"Niveau d'énergie: low, medium, high","default":"medium"},"themes":{"items":{"type":"string"},"type":"array","title":"Themes","description":"Thèmes principaux du mois"}},"type":"object","title":"TransitsInsights","description":"Insights générés à partir des transits"},"TransitsOverviewDB":{"properties":{"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"month":{"type":"string","title":"Month"},"summary":{"type":"object","title":"Summary"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","user_id","month","summary","created_at"],"title":"TransitsOverviewDB","description":"Schéma pour les transits overview en DB"},"TransitsResponse":{"properties":{"provider":{"type":"string","title":"Provider","description":"Source des données","default":"rapidapi"},"kind":{"type":"string","title":"Kind","description":"Type: natal_transits ou lunar_return_transits"},"data":{"type":"object","title":"Data","description":"Données brutes du provider"},"insights":{"anyOf":[{"$ref":"#/components/schemas/TransitsInsights"},{"type":"null"}],"description":"Insights générés"},"cached":{"type":"boolean","title":"Cached","description":"Données du cache DB","default":false}},"type":"object","required":["kind","data"],"title":"TransitsResponse","description":"Réponse standardisée pour les endpoints transits","example":{"cached":false,"data":{"aspects":[{"aspect":"trine","orb":1.2,"planet1":"Jupiter","planet2":"Sun"}]},"insights":{"energy_level":"high","insights":["Jupiter forme un trigone avec votre Soleil natal"],"major_aspects":[],"themes":["expansion","optimisme"]},"kind":"natal_transits","provider":"rapidapi"}},"UserRegister":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"birth_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Date"},"birth_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Time"},"birth_latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Birth Latitude"},"birth_longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Birth Longitude"},"birth_place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Place Name"}},"type":"object","required":["email","password"],"title":"UserRegister"},"UserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","title":"Email"},"birth_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Date"},"birth_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Time"},"birth_place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Place Name"},"is_premium":{"type":"boolean","title":"Is Premium"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","email","birth_date","birth_time","birth_place_name","is_premium","created_at"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VoidOfCourseRequest":{"properties":{"date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date","description":"Date au format YYYY-MM-DD"},"time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Time","description":"Heure au format HH:MM"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude","description":"Latitude du lieu"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude","description":"Longitude du lieu"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone","description":"Fuseau horaire (ex: Europe/Paris)"},"birth_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Date"},"birth_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birth Time"}},"additionalProperties":true,"type":"object","title":"VoidOfCourseRequest","description":"Requête spécifique pour Void of Course"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/auth/login"}}}}}}